ggdraw() +
draw_plot(p1, x = 0.145, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.145, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .1,
width = pwidth, height = pheight)+
panel_border()
plot.with.inset
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
pheight = 0.7
pwidth = 0.7
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.01, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.01, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.1, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.1, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
cowcompplot
cowcompplot
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.1, y = 0.2,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = 0.2,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.1, y = .01,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.4, y = .01,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.1, y = 0.3,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.3,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.1, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
pheight = 0.2
pwidth = 0.2
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.1, y = 0.3,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.3,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.1, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
cowcompplot
?xgb.ggplot.importance
p1 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[1]]$importance,
main="Rep 1")
p2 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[2]]$importance,
main="Rep 2")
p3 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[3]]$importance,
main="Rep 3")
p4 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[4]]$importance,
main="Rep 4")
pheight = 0.4
pwidth = 0.4
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.1, y = 0.4,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.4,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.1, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
cowcompplot
pheight = 0.4
pwidth = 0.6
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.05, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.05, y = .1,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .1,
width = pwidth, height = pheight)+
panel_border()
cowcompplot
jpeg("xgb_multip_imp.jpg",width=10,height=10, res=400, units="in")
cowcompplot
dev.off()
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.05, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.05, y = .05,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .05,
width = pwidth, height = pheight)+
panel_border()
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
pheight = 0.3
pwidth = 0.4
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.05, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.05, y = .05,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .05,
width = pwidth, height = pheight)+
panel_border()
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
p1 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[1]]$importance,
main="Rep 1") + ggtitle("Rep 1")
p2 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[2]]$importance,
main="Rep 2")
p3 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[3]]$importance,
main="Rep 3")
p4 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[4]]$importance,
main="Rep 4")
pheight = 0.3
pwidth = 0.4
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.05, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.05, y = .05,
width = pwidth, height = pheight)+
draw_plot(p1, x = 0.6, y = .05,
width = pwidth, height = pheight)+
panel_border()
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
p1 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[1]]$importance,
main="Rep 1") + ggtitle("Rep 1")
p2 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[2]]$importance,
main="Rep 2") + ggtitle("Rep 2")
p3 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[3]]$importance,
main="Rep 3") + ggtitle("Rep 3")
p4 <- xgb.ggplot.importance(importance_matrix = xg.resultslist[[4]]$importance,
main="Rep 4") + ggtitle("Rep 4")
pheight = 0.3
pwidth = 0.4
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.05, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p2, x = 0.6, y = 0.45,
width = pwidth, height = pheight)+
draw_plot(p3, x = 0.05, y = .05,
width = pwidth, height = pheight)+
draw_plot(p4, x = 0.6, y = .05,
width = pwidth, height = pheight)+
panel_border()
#cowcompplot
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
pheight = 0.4
pwidth = 0.5
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.01, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p2, x = 0.55, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p3, x = 0.01, y = .05,
width = pwidth, height = pheight)+
draw_plot(p4, x = 0.55, y = .05,
width = pwidth, height = pheight)+
panel_border()
#cowcompplot
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
pheight = 0.4
pwidth = 0.4
cowcompplot <-
ggdraw() +
draw_plot(p1, x = 0.01, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p2, x = 0.55, y = 0.55,
width = pwidth, height = pheight)+
draw_plot(p3, x = 0.01, y = .05,
width = pwidth, height = pheight)+
draw_plot(p4, x = 0.55, y = .05,
width = pwidth, height = pheight)+
panel_border()
#cowcompplot
jpeg("xgb_multip_imp.jpg",width=15,height=10, res=400, units="in")
cowcompplot
dev.off()
setwd("~/Documents/GitHub/ConsensusML/composite_code/rnotebook")
load("~/Documents/GitHub/ConsensusML/composite_code/rnotebook/data/svm4reps_resultslist.rda")
length(svm.resultslist)
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
library(SummarizedExperiment)
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
load("~/Documents/GitHub/ConsensusML/composite_code/rnotebook/data/sesetfilt_degseahack_targetaml.rda")
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
1:length(svm.resultslist)
i=1
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
i
i=4
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),14,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
setwd("~/Documents/GitHub/ConsensusML/composite_code/rnotebook")
sys.sep = "/"
data.dir = "data"
seobj.dir = "seobjects"
figs.dir = "figures"
# summarized experiment object names
countsseset.name <- "seset_genecounts_targetaml.rda"
tmmseset.name <- "seset_genetmmfilt_targetaml.rda"
degseset.name <- "seset_degseahack_targetaml.rda"
degfiltset.name <- "sesetfilt_degseahack_targetaml.rda"
maeobj.name <- "mae_targetaml.rda"
qwfilt <- 0.80
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),20,15,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
qwfilt <- 0.80
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),20,15,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
qwfilt <- 0.75
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),20,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
qwfilt <- 0.75
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),15,10,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
qwfilt <- 0.75
jpeg(paste0(figs.dir, sys.sep, "bpweights_svm4reps2.jpg"),11,9,units="in",res=400)
par(mfrow=c(2,2),mar=c(5,3,5,2),oma=c(2,2,2,1))
for(i in 1:length(svm.resultslist)){
wi <- svm.resultslist[[i]]$weightsvect
wv <- wi[1,]
names(wv) <- colnames(wi)
qwi <- quantile(abs(wv),seq(0,1,0.01))[100]  # apply weights filter
wbp <- wv[abs(wv)>=qwi]
wbp <- wbp[order(wbp)]
# append gene symbols to names
for(l in 1:length(wbp)){
names(wbp)[l] <- paste0(names(wbp)[l],";\n",rowData(degfilt.se[names(wbp)[l],])$hgnc_symbol)
}
barplot(wbp,main=paste0("Rep ",i," Weights"), las=2, cex.names = 0.5)
}
dev.off()
